(function(a){function b(){this.__proto__=f?new d(this):new c(this)}function c(h){function m(w){for(var x in u)if(u[x].key==w)return+x;return-1}function o(w){if(w.data.apiKey==g)switch(w.stopPropagation(),w.data.call){default:console.log(w.data.call);break;case"setItem":r.apply(this,w.data.args);break;case"removeItem":r.apply(this,w.data.args);break;case"requestUpdate":q.apply(this);}}function p(w){t[w]=void 0,delete t[w];let x=m(w);u[x]=void 0,delete u[x];for(let z in s)s[z].postMessage({apiKey:g,call:"updateStorage",args:[u]})}function q(){this.postMessage({apiKey:g,call:"updateStorage",args:[u]})}function r(w,x){t[w]=x;let y=-1<m(w)?m(w):u.length;u[y]={key:w,value:x};for(let A in s)s[A].postMessage({apiKey:g,call:"updateStorage",args:[u]})}const s=[],t=h;var u,v;Object.defineProperty(this,"onready",{get:function(){return v},set:function(w){v=w}}),this.clear=function(){for(let w in u)p(u[w].key)},this.getItem=function(w){for(let x in u)if(u[x].key==w)return u[x].value},this.key=function(w){return u[w]?u[w].key:null},this.removeItem=p,this.setItem=r,function(){u=[];let x=window.Worker;window.Worker=function(y,z){let A=new x(y,z);return A.addEventListener("message",o),s.push(A),A}}.apply(this,arguments)}function d(h){function m(v){for(var w in t)if(t[w].key==v)return+w;return-1}function o(v){if(v.data.apiKey==g)switch(v.stopPropagation(),v.data.call){case"updateStorage":r.apply(this,v.data.args);break;default:console.log(v.data.call);}}function p(v,w=!1){s[v]=void 0,delete s[v];var x=m(v);if(t[x]=void 0,delete t[x],w){a.postMessage({apiKey:g,call:"removeItem",args:[v,!0]})}}function q(v,w,x=!1){if(s[v]=w,-1<m(v)?t[m(v)]={key:v,value:w}:t.push({key:v,value:w}),x){a.postMessage({apiKey:g,call:"setItem",args:[v,w,!0]})}}function r(v){for(var w in t)delete s[t[w].key];for(var w in t=v,t)q(t[w].key,t[w].value,!1);u&&(u.apply(new Event("ready",{})),u=void 0)}const s=h;var t,u;Object.defineProperty(this,"onready",{get:function(){return u},set:function(v){u=v}}),this.clear=function(){for(let v in t)p(t[v].key)},this.getItem=function(v){for(var w in t)if(t[w].key==v)return t[w].value},this.key=function(v){return t[v]?t[v].key:null},this.removeItem=function(v){p(v,!0)},this.setItem=function(v,w){q(v,w,!0)},function(){t=[],a.addEventListener("message",o);a.postMessage({apiKey:g,call:"requestUpdate"})}.apply(this,arguments)}const e=!!a.constructor.name.match(/Window/),f=!!a.constructor.name.match(/Worker/),g="sh-apis0001-54c310d4-5c1e084d-574c1bb0";a.SharedStorage=b,a.sharedStorage=new b})(this);
